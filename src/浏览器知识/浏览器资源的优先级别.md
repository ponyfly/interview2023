## 资源的优先级别
### 默认加载顺序
1. 浏览器首先会按照资源默认的优先级确定加载顺序：

html 、 css 、 font 这三种类型的资源优先级最高；
然后是 preload 资源（通过 <link rel=“preload"> 标签预加载）、 script 、 xhr 请求；
接着是图片、语音、视频；
最低的是prefetch预读取的资源。
2. 第二步，根据一定的实际规则，对优先级进行调整。
初始优先级设置好以后，浏览器会根据资源的实际属性和位于文档中的位置等方面，对优先级进行调整，来确定出最终的加载优先级顺序。对于几个常见资源类型的调整规则如下：


对于XHR请求资源：将同步XHR请求的优先级调整为最高。
XHR请求可以分为同步请求和异步请求，浏览器会把同步请求的优先级提升到最高级，以便尽早获取数据、加快页面的显示。
对于图片资源：会根据图片是否在可见视图之内来改变优先级。
图片资源的默认优先级为Low。现代浏览器为了提高用户首屏的体验，在渲染时会计算图片资源是否在首屏可见视图之内，在的话，会将这部分视口可见图片(Image in viewport)资源的优先级提升为High。
对于脚本资源：浏览器会将根据脚本所处的位置和属性标签分为三类，分别设置优先级。
首先，对于添加了defer/async属性标签的脚本的优先级会全部降为Low。
然后，对于没有添加该属性的脚本，根据该脚本在文档中的位置是在浏览器展示的第一张图片之前还是之后，又可分为两类。在之前的(标记early**)它会被定为High优先级，在之后的(标记late**)会被设置为Medium优先级。
下图总结了资源优先级计算后各类资源的优先级情况，其中特别将上面讲的三种常见资源的情况框了出来。红框框中的为脚本类型、紫框的为图片类型、蓝框为XHR请求。图片来源点此。
(最终加载顺序)[!./imgs/img_8.png]
(关键请求链和优化)[!https://juejin.cn/post/6844903545016156174#heading-5]
